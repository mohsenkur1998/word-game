<!DOCTYPE html>
<html>
<head>
    <title>Random Name Generator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-3">Random Name:</h1>
        <div class="alert alert-info">{{ name.student_name }}</div>
        <form method="post" action="">
            {% csrf_token %}
            <div class="form-group">
                <label for="time_limit">Time Limit (in seconds):</label>
                <input type="number" name="time_limit" id="time_limit" min="1" max="3600" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Set Time Limit</button>
        </form>
        <div class="mt-3">
            <h3>Time Remaining: <span id="time_remaining"></span> seconds</h3>
        </div>
        <button type="button" class="btn btn-success mt-3" id="get_new_name">Get New Name</button>
        <button type="button" class="btn btn-danger mt-3" id="stop_generating">Stop Generating</button>

    </div>


<script>
    // JavaScript code to update time remaining dynamically and reload page after time limit expires
    $(document).ready(function() {
        var end_time = {{ request.session.end_time }};
        timerInterval = setInterval(function() {
            var current_time = Math.round((new Date()).getTime() / 1000);
            var time_remaining = Math.round(end_time - current_time, 0);
            $('#time_remaining').text(time_remaining);

            $('#get_new_name').click(function () {
                location.reload();
            });

            $('#stop_generating').click(function() {
                clearInterval(timerInterval);
            });
            if (time_remaining <= 0) {
                // Reload the page after time limit expires
                location.reload();
            }
        }, 1000);
    });


</script>





</body>
</html>
